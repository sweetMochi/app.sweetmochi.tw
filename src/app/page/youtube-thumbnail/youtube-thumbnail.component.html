<mat-card class="card" appearance="outlined">
    <mat-card-content>
        <form [formGroup]="formGroup">
            <div class="form">
                <mat-form-field class="form-field" appearance="outline">
                    <mat-label>Search YouTube thumbnail</mat-label>
                    <input
                        matInput
                        type="url"
                        placeholder="Your YouTube URL here"
                        formControlName="url"
                    />
                    @if (imgSrc) {
                        <mat-icon matSuffix (click)="clearImg()">close</mat-icon>
                    }
                    @if (formError('required')) {
                        <mat-error>URL is required</mat-error>
                    }
                    @else if (formError('invalidUrl')) {
                        <mat-error [textContent]="formError('invalidUrl')"></mat-error>
                    }
                    @else if (formError('invalidYouTubeUrl')) {
                        <mat-error [textContent]="formError('invalidYouTubeUrl')"></mat-error>
                    }
                    @else if (formError('invalidYouTubeId')) {
                        <mat-error [textContent]="formError('invalidYouTubeId')"></mat-error>
                    }
                    @else if (formError('YouTubeIsNotAvailable')) {
                        <mat-error [textContent]="formError('YouTubeIsNotAvailable')"></mat-error>
                    }
                </mat-form-field>
            </div>
            <button class="send" mat-flat-button>SEARCH</button>
        </form>
    </mat-card-content>
</mat-card>

@if (imgSrc) {
    <mat-card class="card" appearance="outlined">

        @if (imgSrc) {
            <img
                mat-card-image
                [src]="imgSrc"
                [alt]="videoTitle"
            />
        }

        <mat-card-content>
            @if (webUrl) {
                <mat-form-field class="form-field" appearance="outline">
                    <mat-label>YouTube web URL</mat-label>
                    <input
                        matInput
                        readonly
                        type="url"
                        [value]="webUrl"
                    />
                    <mat-icon matSuffix class="copy" (click)="userCopy(webUrl)">content_copy</mat-icon>
                </mat-form-field>
            }
            @if (shortUrl) {
                <mat-form-field class="form-field" appearance="outline">
                    <mat-label>YouTube short URL</mat-label>
                    <input
                        matInput
                        readonly
                        type="url"
                        [value]="shortUrl"
                    />
                    <mat-icon matSuffix class="copy" (click)="userCopy(shortUrl)">content_copy</mat-icon>
                </mat-form-field>
            }
            @if (videoTitle) {
                <mat-form-field class="form-field form-field-nohint" appearance="outline">
                    <mat-label>YouTube video title</mat-label>
                    <input
                        matInput
                        readonly
                        type="url"
                        [value]="videoTitle"
                    />
                    <mat-icon matSuffix class="copy" (click)="userCopy(videoTitle)">content_copy</mat-icon>
                </mat-form-field>
            }
        </mat-card-content>
    </mat-card>
}
